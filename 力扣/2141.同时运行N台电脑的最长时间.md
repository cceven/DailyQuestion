#二分答案
## 方法一： 二分答案
二分答案类的题的共性：当100可以时，99一定可以。当101不可以时，102一定不可以。
本题就可以用二分答案来做，下界显然为0，上界的理论值为$sum/n$（实际上的值应该是小于等于$sum/n$的，因为可能有些电池过于饱满而无法充分利用）。
判断当前答案是否可行：遍历所有电池，如果大于等于mid那么真实可用电池量`sum`加上mid，否则加上实际电池量。如果最后的实际可用电池量大于等于需求量($mid\times n$)，那么当前答案mid就是可行的。
```cpp
class Solution {
public:
    long long maxRunTime(int n, vector<int>& batteries) {
        long long sum = 0; // 总电量
        for (int b : batteries) {
            sum += b;
        }
        long long left = 0, right = sum / n;
        long long ans = 0;
        while (left <= right) {
            long long mid = left + (right - left) / 2;
            if (check(n, batteries, mid)) {
                ans = mid;
                left = mid + 1;
            } else {
                right = mid - 1;
            }
        }
        return ans;
    }

private:
    bool check(int n, vector<int>& batteries, long long target_time) {
        long long sum = 0;
        long long requirements = target_time * n;// 当前mid所需电量
        for (int b : batteries) {
            if (b >= target_time) {
                sum += target_time;
            } else {
                sum += b;
            }
            if (sum >= requirements)
                return true;
        }
        return sum >= requirements;
    }
};
```
## 方法二：贪心+数学推导
如果一个电池的电量大于等于理论上界($\frac{sum}{n}$)，那么这个电池一定能够负责一台电脑到最后，我们直接总电池量减去该电池，同时电脑数-1即可把问题范围缩小。所以我们就先对电池按照电量大小从大到小进行排序，然后依次查询。
当查询到电池电量$<\frac{sum}{n}$时（这里不能用$\leq$符号，不然当出现如3台电脑，3个电量一样的电池这种情况时，电脑和电池都会被清空，导致结果为0），后面的电池能量应该就能均衡分给所有电脑，此时现在的$\frac{sum}{n}$就是我们所求的最长电脑同时运行时间。当不能满足同时运行的情况时，$\frac{sum}{n}$的结果就是0。
```cpp
class Solution {
public:
    long long maxRunTime(int n, vector<int>& batteries) {
        long long sum = 0;
        for (long long b : batteries) {
            sum += b;
        }

        sort(batteries.begin(), batteries.end(), greater<int>());
        for (int i = 0; i < batteries.size(); i++) {
            if (batteries[i] > sum / n) {//这里不能使用>=符号是因为防止清空元素（电池与电脑一一对应的情况）
                n--;
                sum -= batteries[i];
            } else {
                return sum / n;
            }
        }
        return 0;
    }
};
```

