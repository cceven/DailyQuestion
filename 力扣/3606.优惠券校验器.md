[3606](https://leetcode.cn/problems/coupon-code-validator/solutions/3853498/you-hui-quan-xiao-yan-qi-by-leetcode-sol-6noh/?envType=daily-question&envId=2025-12-13)
```cpp
class Solution {
public:
    vector<string> validateCoupons(vector<string>& code,
                                   vector<string>& businessLine,
                                   vector<bool>& isActive) {
        int n = code.size();
        vector<pair<int, string>> ans1;
        for (int i = 0; i < n; i++) {
            if (!isVal1(code[i])||!isVal2(businessLine[i])||!isActive[i])
                continue;

            int pri = getPriority(businessLine[i]);
            if (pri == -1)
                continue;

            ans1.push_back({pri, code[i]});
        }

        sort(ans1.begin(), ans1.end());
        vector<string> ans;
        for (auto& [x, y] : ans1)
            ans.push_back(y);
        return ans;
    }

private:
    bool isVal1(string str) {
        if (str.size() == 0)
            return false;
        for (auto& c : str) {
            if (!isalnum(c) && c != '_')
                return false;
        }
        return true;
    }
    bool isVal2(string str) {
        if (str == "electronics" || str == "grocey" || str == "pharmacy" ||
            str == "restaurant")
            return true;
        return false;
    }
    int getPriority(const string& s) {
        if (s == "electronics")
            return 0;
        if (s == "grocery")
            return 1;
        if (s == "pharmacy")
            return 2;
        if (s == "restaurant")
            return 3;
        return 4; // 其他情况放最后
    }
};
```