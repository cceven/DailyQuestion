[3623](https://leetcode.cn/problems/count-number-of-trapezoids-i/?envType=daily-question&envId=2025-12-02)：本题求能够形成的梯形数目，梯形其实两个平行线段相连就能形成。于是可以把问题转换为求每一行有多少个线段，然后相乘就可以了。通过一个`unordered_map`记录每一行的点的数量`count`，那么对应行所拥有的线段数量就是$\frac{count\times (count-1)}{2}$。我们直接遍历之前的那个`unordered_map`，并且定义一个已经有的线段数量`pre_sum`。每遍历一行，当前行的线段数量就乘已有的线段数量加到`ans`里面去(`ans = (ans + num * pre_sum) % MOD;`)，然后更新已有的线段数量(`pre_sum = (pre_sum + num) % MOD`)。
```cpp
class Solution {
public:
    int countTrapezoids(vector<vector<int>>& points) {
        unordered_map<int, int> cnt;
        for (const auto& p : points) {
            cnt[p[1]]++;
        }
        const long long MOD = 1e9 + 7;
        long long ans = 0;
        long long pre_sum = 0;
        for (auto& [y, count] : cnt) {
            if (count < 2)
                continue; // 线段数量小于2个，直接跳过
            long long num = (long long)count * (count - 1) / 2;
            ans = (ans + num * pre_sum) % MOD;
            pre_sum = (pre_sum + num) % MOD;
        }
        return ans;
    }
};
```